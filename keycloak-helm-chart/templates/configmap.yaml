apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "keycloak.fullname" . }}-config
  labels:
    {{- include "keycloak.labels" . | nindent 4 }}
data:
  # Additional configuration can be added here
  # For example, custom realm configurations, themes, etc.
  keycloak.conf: |
    # Keycloak configuration file
    # Database
    db={{ .Values.keycloak.configuration.database.vendor }}

    # Hostname
    hostname={{ .Values.keycloak.configuration.hostname }}
    hostname-strict={{ .Values.keycloak.configuration.hostnameStrict }}
    hostname-strict-backchannel={{ .Values.keycloak.configuration.hostnameStrictBackchannel }}

    # HTTP/HTTPS
    http-enabled={{ .Values.keycloak.configuration.http.enabled }}
    http-port={{ .Values.keycloak.configuration.http.port }}
    {{- if .Values.keycloak.configuration.https.enabled }}
    https-port={{ .Values.keycloak.configuration.https.port }}
    {{- end }}

    # Proxy
    proxy={{ .Values.keycloak.configuration.proxy }}

    # Health and Metrics
    health-enabled={{ .Values.keycloak.configuration.healthEnabled }}
    metrics-enabled={{ .Values.keycloak.configuration.metricsEnabled }}

    # Logging
    log-level={{ .Values.keycloak.configuration.logLevel }}

    # Cache
    cache-stack={{ .Values.keycloak.configuration.cache.stack }}
